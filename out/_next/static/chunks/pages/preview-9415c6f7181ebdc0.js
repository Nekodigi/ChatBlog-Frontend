(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[175],{970:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/preview",function(){return __webpack_require__(1863)}])},7549:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Post}});var jsx_runtime=__webpack_require__(5893),next_link=__webpack_require__(1664),link_default=__webpack_require__.n(next_link);function Note(param){let{note}=param;var message=(0,jsx_runtime.jsx)("div",{className:"noteCard ".concat(note.type),children:(0,jsx_runtime.jsx)("p",{children:note.message})});return void 0!==note.url&&(message=(0,jsx_runtime.jsx)(link_default(),{href:note.url,className:"noteCard ".concat(note.type),children:(0,jsx_runtime.jsx)("p",{children:note.message})})),message}var index_es=__webpack_require__(9603),free_solid_svg_icons=__webpack_require__(9417);function ImageOverlay(param){let{imageUrl,setOverlay}=param,close=e=>{e.stopPropagation(),setOverlay(!1)};return(0,jsx_runtime.jsxs)("div",{onClick(e){close(e)},id:"overlay",children:[(0,jsx_runtime.jsx)("a",{onClick(e){close(e)},children:(0,jsx_runtime.jsx)(index_es.G,{icon:free_solid_svg_icons.g82})}),(0,jsx_runtime.jsx)("img",{onClick(e){e.stopPropagation()},id:"overlayImg",src:imageUrl})]})}var react=__webpack_require__(7294),firebase=__webpack_require__(6375);let formatDate=obj=>{let date=new Date(1e3*obj._seconds);return date.getFullYear()+"-"+("00"+(date.getMonth()+1)).slice(-2)+"-"+("00"+date.getDate()).slice(-2)};function Post(param){let{post,note}=param,[overlay,setOverlay]=(0,react.useState)(!1),[imageUrl,setImageUrl]=(0,react.useState)(""),odd=post.image_paths.length%2==1?"odd":"";return(0,jsx_runtime.jsxs)("div",{children:[overlay?(0,jsx_runtime.jsx)(ImageOverlay,{imageUrl:imageUrl,setOverlay:setOverlay}):null,(0,jsx_runtime.jsx)("div",{className:"paper",children:(0,jsx_runtime.jsxs)("div",{children:[note?(0,jsx_runtime.jsx)(Note,{note:note}):null,(0,jsx_runtime.jsxs)("div",{className:"heading",children:[(0,jsx_runtime.jsx)("h2",{className:"title",children:post.title}),(0,jsx_runtime.jsx)("p",{className:"date",children:formatDate(post.created_date)})]}),(0,jsx_runtime.jsx)("div",{className:"postImages ".concat(odd),children:post.image_paths.map(path=>(0,jsx_runtime.jsx)("img",{src:(0,firebase._)(path),onClick(){setOverlay(!0),setImageUrl((0,firebase._)(path))},className:"postImage",alt:"image"},path))}),(0,jsx_runtime.jsx)("p",{className:"body",children:post.body})]})})]})}},5445:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Preview}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7294),_post_post__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7549);function Preview(param){let{id,router}=param,[post,setPost]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(void 0);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{let access_db=async()=>{if(router.isReady){let post=await (await fetch("".concat("https://us-central1-foodbankbotdev.cloudfunctions.net/app","/api/preview/").concat(id))).json();setPost(post)}};access_db()},[id,router]),post?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_post_post__WEBPACK_IMPORTED_MODULE_2__.Z,{post:post,note:(post=>{let note;switch(post.status){case"approved":note={message:"投稿が承認され、一覧からも確認できるようになりました。このメッセージをタップして新しいページに移動してください。※反映には時間がかかります。",type:"success",url:"/post/".concat(post.id)};break;case"waiting_approval":note={message:"ただいま確認待ちです。事務局が承認するまで一覧には表示されません。",type:"warning"};break;case"denied":note={message:"投稿内容に問題があったため、投稿が拒否されました。内容を見直して再投稿頂けるようお願い致します。",type:"danger"}}return note})(post)}):null}},1863:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return PreviewView}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),components_preview__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5445),next_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1163);function PreviewView(){let router=(0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)(),id=router.query.id;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(components_preview__WEBPACK_IMPORTED_MODULE_1__.Z,{id:id,router:router})}},6375:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{_:function(){return imagePathUrl}});let projectDomain=()=>"foodbankbotdev.appspot.com",imagePathUrl=path=>"https://firebasestorage.googleapis.com/v0/b/".concat(projectDomain(),"/o/").concat(encodeURIComponent(path),"?alt=media")},1163:function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__(880)}},function(__webpack_require__){__webpack_require__.O(0,[774,888,179],function(){return __webpack_require__(__webpack_require__.s=970)}),_N_E=__webpack_require__.O()}]);